{"version":3,"sources":["bundle.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","value","ApplicationDetailsModal","_this","this","instance","Constructor","TypeError","_classCallCheck","visible","$titleContainer","$","$bodyImage","$bodyText","$bodyLinks","$bodyContainer","append","$modal","html","on","protoProps","staticProps","url","replace","application","_this2","title","attr","concat","id","body","empty","links","split","map","each","substr","formatURL","modal","prototype","2","obj","_applicationDetailsModal","__esModule","default","window","MathsEverywhere","applications","applicationsById","fromEntries","update","location","hash","applicationID","undefined","show","hide","history","pushState","appLink","ev","preventDefault","./applicationDetailsModal","./responsiveMenu","3","$container","$menu","$element","element","clone","addClass","appendTo"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar ApplicationDetailsModal =\n/*#__PURE__*/\nfunction () {\n  function ApplicationDetailsModal() {\n    var _this = this;\n\n    _classCallCheck(this, ApplicationDetailsModal);\n\n    this.visible = false;\n    this.$titleContainer = $('<div class=\"modal-title\">');\n    this.$bodyImage = $('<img class=\"modal-body-image img-fluid mb-4\">');\n    this.$bodyText = $('<div class=\"modal-body-text\">');\n    this.$bodyLinks = $('<div class=\"modal-body-links\">');\n    this.$bodyContainer = $('<div class=\"modal-body\">').append($('<div class=\"container-fluid\">').append($('<div class=\"row\">').append($('<div class=\"col-lg col-md-12\">').append(this.$bodyImage)).append($('<div class=\"col-lg col-md-12\">').append(this.$bodyText))).append($('<div class=\"row\">').append($('<div class=\"col\">').append(this.$bodyLinks))));\n    this.$modal = $('<div class=\"modal fade\">').append($('<div class=\"modal-dialog modal-lg\">').append($('<div class=\"modal-content\">').append($('<div class=\"modal-header\">').append(this.$titleContainer).append($('<button type=\"button\" class=\"close\" data-dismiss=\"modal\">').append($('<span>').html('&times;')))).append(this.$bodyContainer)));\n    this.$modal.on('hidden.bs.modal', function () {\n      _this.visible = false;\n    });\n    this.$modal.on('shown.bs.modal', function () {\n      _this.visible = true;\n    });\n  }\n\n  _createClass(ApplicationDetailsModal, [{\n    key: \"formatURL\",\n    value: function formatURL(url) {\n      return url.replace(/\\//g, '/<wbr>').replace(/_/g, '_<wbr>').replace(/\\./g, '.<wbr>');\n    }\n  }, {\n    key: \"show\",\n    value: function show(application) {\n      var _this2 = this;\n\n      this.$titleContainer.html(application.title);\n      this.$bodyImage.attr('src', \"assets/img/applications/\".concat(application.id, \".jpg\"));\n      this.$bodyText.html(application.body);\n      this.$bodyLinks.empty();\n\n      if (application.links) {\n        var links = application.links.split('\\n').map(function (each) {\n          if (each.substr(0, 'http'.length) !== 'http') {\n            return \"http://\".concat(each);\n          }\n\n          return each;\n        }).map(function (each) {\n          return $('<li>').append($('<a>').attr('href', each).attr('target', '_blank').attr('rel', 'noopener').html(_this2.formatURL(each)));\n        });\n        this.$bodyLinks.append($('<ul class=\"colored\">').append(links));\n      }\n\n      if (!this.visible) {\n        this.$modal.modal('show');\n      } else {\n        this.$modal.modal('handleUpdate');\n      }\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.$modal.modal('hide');\n    }\n  }]);\n\n  return ApplicationDetailsModal;\n}();\n\nexports[\"default\"] = ApplicationDetailsModal;\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nrequire(\"./responsiveMenu\");\n\nvar _applicationDetailsModal = _interopRequireDefault(require(\"./applicationDetailsModal\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n// eslint-disable-next-line import/no-extraneous-dependencies\n// import 'core-js/stable'; // ES Polyfills, include only if needed... around 200k minimized!\nif (window.MathsEverywhere.applications) {\n  window.MathsEverywhere.applicationsById = Object.fromEntries(window.MathsEverywhere.applications.map(function (each) {\n    return [each.id, each];\n  }));\n}\n\nvar modal = new _applicationDetailsModal[\"default\"](); // If the modal closes we change the URL. This breaks encapsulation\n// but adding an extra event is overkill at this point.\n\nmodal.$modal.on('hidden.bs.modal', function () {\n  if (window.history.pushState) {\n    window.history.pushState(null, null, '#');\n  } else {\n    window.location.hash = '';\n  }\n});\n/**\n * Redraw the view based on the route\n */\n\nfunction update() {\n  if (window.location.hash.length > 0) {\n    var applicationID = window.location.hash.replace('#', '');\n\n    if (window.MathsEverywhere.applicationsById[applicationID] !== undefined) {\n      var application = window.MathsEverywhere.applicationsById[applicationID];\n      modal.show(application);\n    }\n  } else {\n    modal.hide();\n  }\n}\n\n$(window).on('hashchange', function () {\n  update();\n});\nupdate(); // Change the internal links so instead of the default internal\n// navigation they change the hash via \"location.replace\". This\n// changes how navigation history is created. If you\n// click on an application, close it, open another, close it, etc.\n// and then navigate via the back button several times you'll\n// go through all the seen applications instead of seeing\n// home, application, home, application, etc.\n\n$('.application a').each(function (i, appLink) {\n  $(appLink).on('click', function (ev) {\n    ev.preventDefault();\n    window.location.replace($(appLink).attr('href'));\n    return false;\n  });\n});\n\n},{\"./applicationDetailsModal\":1,\"./responsiveMenu\":3}],3:[function(require,module,exports){\n\"use strict\";\n\nvar $container = $('.header-col-title');\nvar $menu = $('<div class=\"dropdown-menu dropdown-menu-right\"></div>');\nvar $element = $('<div class=\"menu-responsive dropdown d-xl-none\"></div>').append($('<button class=\"btn dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">')).append($menu);\n$('.header-menu a').each(function (i, element) {\n  $(element).clone().addClass('dropdown-item').appendTo($menu);\n});\n$menu.append($('<div class=\"dropdown-divider\"></div>'));\n$('.lang-switcher .dropdown-item').clone().appendTo($menu);\n$container.append($element);\n\n},{}]},{},[2]);\n"]}